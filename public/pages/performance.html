<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Requirements - Currency Denomination Calculator</title>
        <link rel="stylesheet" href="../css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">

        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>📺 Documentation</h2>
                <p style="font-size: 0.75rem; color: rgba(255,255,255,0.6); margin-top: 0.5rem;">v1.0.0</p>
            </div>
            
            <div class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Overview</div>
                    <ul class="nav-links">
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="./executive-summary.html">Executive Summary</a></li>
                        <li><a href="./project-overview.html">Project Overview</a></li>
                        <li><a href="./codebase.html">Browse Codebase (Live)</a></li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Architecture</div>
                    <ul class="nav-links">
                        <li><a href="./system-architecture.html">System Architecture</a></li>
                        <li><a href="./core-features.html">Core Features</a></li>
                        <li><a href="./ui-ux-requirements.html">UI/UX Requirements</a></li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Implementation</div>
                    <ul class="nav-links">
                        <li><a href="./backend-logic.html">Backend Logic</a></li>
                        <li><a href="./bulk-upload.html">Bulk Upload System</a></li>
                        <li><a href="./ocr-system.html">OCR System</a></li>
                        <li><a href="./smart-defaults.html">Smart Defaults</a></li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Technical Details</div>
                    <ul class="nav-links">
                        <li><a href="./multi-language.html">Multi-Language Support</a></li>
                        <li><a href="./data-models.html">Data Models & Database</a></li>
                        <li><a href="./api-specifications.html">API Specifications</a></li>
                        <li><a href="./calculation-engine.html">Calculation Engine</a></li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Operations</div>
                    <ul class="nav-links">
                        <li><a href="./error-handling.html">Error Handling</a></li>
                        <li><a href="./complete-codebase.html">Complete Codebase (Static)</a></li>
                        <li><a href="./dependencies.html">Dependencies & Installation</a></li>
                        <li><a href="./testing.html">Testing & QA</a></li>
                        <li><a href="./deployment.html">Deployment</a></li>
                        <li><a href="./performance.html" class="active">Performance Requirements</a></li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Resources</div>
                    <ul class="nav-links">
                        <li><a href="./known-issues.html">Known Issues & Fixes</a></li>
                        <li><a href="./future-enhancements.html">Future Enhancements</a></li>
                        <li><a href="./screenshots.html">Screenshots & Outputs</a></li>
                        <li><a href="./acceptance-criteria.html">Acceptance Criteria</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="main-content">

            <header class="page-header">
                <div class="breadcrumbs">
                    <a href="../index.html">Documentation</a>
                    <span class="separator">›</span>
                    <span>Performance Requirements</span>
                </div>
                <div class="header-actions">
                    <a href="../index.html" class="action-link">🏠 Home</a>
                    <a href="javascript:window.print()" class="action-link">🖨️ Print</a>
                    <a onclick="performLogout()" href="#" class="action-link">🚪 Logout</a>
                </div>
            </header>

            <article class="article-container">

                <h1>16. Performance Requirements</h1>

                <section id="performance-benchmarks">
                    <h2>16.1 Performance Benchmarks</h2>

                    <h3>Core Operations</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Operation</th>
                                <th>Requirement</th>
                                <th>Current Performance</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Single calculation</td>
                                <td>&lt; 1ms</td>
                                <td>~0.3ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>100 calculations (batch)</td>
                                <td>&lt; 100ms</td>
                                <td>~35ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>1000 calculations (bulk)</td>
                                <td>&lt; 500ms</td>
                                <td>~280ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>10000 calculations</td>
                                <td>&lt; 5s</td>
                                <td>~2.8s</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>File Processing</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>File Type</th>
                                <th>Size</th>
                                <th>Requirement</th>
                                <th>Current</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CSV (100 rows)</td>
                                <td>5 KB</td>
                                <td>&lt; 500ms</td>
                                <td>~250ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>CSV (1000 rows)</td>
                                <td>50 KB</td>
                                <td>&lt; 2s</td>
                                <td>~1.2s</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>PDF (text, 10 pages)</td>
                                <td>500 KB</td>
                                <td>&lt; 2s</td>
                                <td>~1.5s</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>PDF (scanned, 1 page)</td>
                                <td>2 MB</td>
                                <td>&lt; 3s</td>
                                <td>~2.8s</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Image (JPG, 300 DPI)</td>
                                <td>1 MB</td>
                                <td>&lt; 3s</td>
                                <td>~2.5s</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Word document (10 pages)</td>
                                <td>100 KB</td>
                                <td>&lt; 1s</td>
                                <td>~600ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Database Operations</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Operation</th>
                                <th>Requirement</th>
                                <th>Current</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Insert single record</td>
                                <td>&lt; 10ms</td>
                                <td>~3ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Bulk insert (100 records)</td>
                                <td>&lt; 200ms</td>
                                <td>~120ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Query latest 50 records</td>
                                <td>&lt; 100ms</td>
                                <td>~25ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Filter by currency (100+ records)</td>
                                <td>&lt; 50ms</td>
                                <td>~18ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Delete single record</td>
                                <td>&lt; 10ms</td>
                                <td>~4ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Clear all history (10K records)</td>
                                <td>&lt; 2s</td>
                                <td>~800ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>UI Responsiveness</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Action</th>
                                <th>Requirement</th>
                                <th>Current</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Page load (initial)</td>
                                <td>&lt; 2s</td>
                                <td>~800ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Page navigation</td>
                                <td>&lt; 100ms</td>
                                <td>~50ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Dark mode toggle</td>
                                <td>&lt; 50ms</td>
                                <td>~15ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Language switch</td>
                                <td>&lt; 200ms</td>
                                <td>~100ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                            <tr>
                                <td>Form input response</td>
                                <td>&lt; 16ms (60 FPS)</td>
                                <td>~10ms</td>
                                <td><span class="badge badge-success">âœ“ Pass</span></td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <section id="resource-limits">
                    <h2>16.2 Resource Usage Limits</h2>

                    <h3>Memory Constraints</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>Maximum</th>
                                <th>Typical</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Backend (idle)</td>
                                <td>100 MB</td>
                                <td>~60 MB</td>
                                <td>FastAPI + SQLite</td>
                            </tr>
                            <tr>
                                <td>Backend (processing)</td>
                                <td>500 MB</td>
                                <td>~200 MB</td>
                                <td>With OCR active</td>
                            </tr>
                            <tr>
                                <td>Frontend (Electron)</td>
                                <td>300 MB</td>
                                <td>~180 MB</td>
                                <td>React + Chromium</td>
                            </tr>
                            <tr>
                                <td>Database size (10K calculations)</td>
                                <td>50 MB</td>
                                <td>~25 MB</td>
                                <td>SQLite file size</td>
                            </tr>
                            <tr>
                                <td>Single file upload</td>
                                <td>10 MB</td>
                                <td>1-5 MB</td>
                                <td>Hard limit enforced</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>CPU Usage</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Operation</th>
                                <th>Maximum</th>
                                <th>Typical</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Idle state</td>
                                <td>5%</td>
                                <td>&lt;1%</td>
                            </tr>
                            <tr>
                                <td>Single calculation</td>
                                <td>10%</td>
                                <td>~3%</td>
                            </tr>
                            <tr>
                                <td>Bulk processing (100 rows)</td>
                                <td>40%</td>
                                <td>~25%</td>
                            </tr>
                            <tr>
                                <td>OCR processing (active)</td>
                                <td>80%</td>
                                <td>~60%</td>
                            </tr>
                            <tr>
                                <td>UI rendering</td>
                                <td>20%</td>
                                <td>~8%</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Network (Local API Calls)</h3>
                    <div class="alert alert-info">
                        <strong>Fully Offline Application</strong>
                        <p>All operations are local (localhost). No external network requests after dependencies are installed.</p>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>API Endpoint</th>
                                <th>Latency Target</th>
                                <th>Actual</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>/api/v1/calculate</td>
                                <td>&lt; 10ms</td>
                                <td>~3ms</td>
                            </tr>
                            <tr>
                                <td>/api/v1/history</td>
                                <td>&lt; 50ms</td>
                                <td>~12ms</td>
                            </tr>
                            <tr>
                                <td>/api/v1/bulk/upload</td>
                                <td>Variable</td>
                                <td>~2-5s for 100 rows</td>
                            </tr>
                            <tr>
                                <td>/api/v1/settings</td>
                                <td>&lt; 20ms</td>
                                <td>~6ms</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <section id="optimization-strategies">
                    <h2>16.3 Optimization Strategies</h2>

                    <h3>Backend Optimizations</h3>
                    <div class="feature-card">
                        <h4>1. Database Indexing</h4>
                        <pre><code class="language-sql">-- Performance-critical indexes
CREATE INDEX idx_currency ON calculations(currency);
CREATE INDEX idx_timestamp ON calculations(timestamp DESC);
CREATE INDEX idx_currency_timestamp ON calculations(currency, timestamp DESC);</code></pre>

                        <h4>2. Decimal Precision (Financial Accuracy)</h4>
                        <pre><code class="language-python">from decimal import Decimal, getcontext

# Set precision for financial calculations
getcontext().prec = 28  # 28 decimal places

# Always use Decimal for money
amount = Decimal("1850.50")  # âœ“ Correct
# amount = 1850.50  # âœ— Avoid floats for money</code></pre>

                        <h4>3. Batch Processing</h4>
                        <pre><code class="language-python"># Bulk insert optimization
with db.begin():
    for calc in calculations:
        db.add(Calculation(**calc))
    # Commits once at the end (faster than individual commits)</code></pre>

                        <h4>4. OCR Optimization</h4>
                        <ul>
                            <li>Image preprocessing (grayscale, DPI normalization)</li>
                            <li>Tesseract PSM mode optimization (mode 6 for text blocks)</li>
                            <li>Confidence score filtering (&gt;60%)</li>
                            <li>Parallel processing for multi-page PDFs (future)</li>
                        </ul>
                    </div>

                    <h3>Frontend Optimizations</h3>
                    <div class="feature-card">
                        <h4>1. React Performance</h4>
                        <pre><code class="language-tsx">// Use React.memo for expensive components
const BreakdownTable = React.memo(({ breakdown }) => {
    // Component only re-renders if breakdown changes
});

// Debounce user input
const debouncedAmount = useDebounce(amount, 300);</code></pre>

                        <h4>2. Lazy Loading</h4>
                        <pre><code class="language-tsx">// Code splitting for routes
const HistoryPage = lazy(() => import('./pages/HistoryPage'));
const BulkUploadPage = lazy(() => import('./pages/BulkUploadPage'));</code></pre>

                        <h4>3. Virtual Scrolling (Large Lists)</h4>
                        <pre><code class="language-tsx">import { FixedSizeList } from 'react-window';

// Render only visible items for 1000+ row tables
<FixedSizeList
  height={600}
  itemCount={items.length}
  itemSize={50}
>
  {Row}
</FixedSizeList></code></pre>

                        <h4>4. Caching</h4>
                        <ul>
                            <li>React Query for API response caching</li>
                            <li>LocalStorage for settings and language</li>
                            <li>Memoization for expensive calculations</li>
                        </ul>
                    </div>
                </section>

                <section id="scalability">
                    <h2>16.4 Scalability Considerations</h2>

                    <h3>Current Limits (Phase 1)</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Resource</th>
                                <th>Current Limit</th>
                                <th>Recommended Max</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Database calculations</td>
                                <td>No hard limit</td>
                                <td>~100K records (optimal)</td>
                            </tr>
                            <tr>
                                <td>Bulk upload rows</td>
                                <td>10,000 rows</td>
                                <td>1,000-5,000 typical</td>
                            </tr>
                            <tr>
                                <td>History page size</td>
                                <td>200 per page (max)</td>
                                <td>50 default</td>
                            </tr>
                            <tr>
                                <td>Concurrent users</td>
                                <td>1 (desktop app)</td>
                                <td>N/A (single user)</td>
                            </tr>
                            <tr>
                                <td>File upload size</td>
                                <td>10 MB</td>
                                <td>1-5 MB optimal</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Future Scalability (Phase 2+)</h3>
                    <ul>
                        <li><strong>Cloud Sync:</strong> PostgreSQL backend for multi-device sync</li>
                        <li><strong>Multi-User:</strong> Authentication + user isolation</li>
                        <li><strong>API Rate Limiting:</strong> Prevent abuse in public API</li>
                        <li><strong>Horizontal Scaling:</strong> Load balancer + multiple backend instances</li>
                        <li><strong>CDN:</strong> Static asset delivery for web version</li>
                        <li><strong>Caching Layer:</strong> Redis for frequently accessed data</li>
                    </ul>
                </section>

                <section id="monitoring">
                    <h2>16.5 Performance Monitoring</h2>

                    <h3>Backend Logging</h3>
                    <pre><code class="language-python">import logging
import time

logger = logging.getLogger(__name__)

# Performance logging decorator
def log_performance(func):
    def wrapper(*args, **kwargs):
        start = time.perf_counter()
        result = func(*args, **kwargs)
        duration = time.perf_counter() - start
        
        logger.info(f"{func.__name__} completed in {duration*1000:.2f}ms")
        
        if duration > 1.0:  # Warn if > 1s
            logger.warning(f"Slow operation: {func.__name__} took {duration:.2f}s")
        
        return result
    return wrapper

@log_performance
def process_bulk_upload(file):
    # Function implementation
    pass</code></pre>

                    <h3>Frontend Performance Monitoring</h3>
                    <pre><code class="language-typescript">// React component render tracking
useEffect(() => {
  console.time('CalculatorPage render');
  return () => {
    console.timeEnd('CalculatorPage render');
  };
}, []);

// API call timing
const fetchData = async () => {
  const start = performance.now();
  const response = await axios.get('/api/v1/history');
  const duration = performance.now() - start;
  
  console.log(`API call took ${duration.toFixed(2)}ms`);
  return response.data;
};</code></pre>

                    <h3>Health Check Script</h3>
                    <p><strong>File:</strong> <code>health-check.ps1</code></p>
                    <pre><code class="language-powershell">Write-Host "=== System Health Check ===" -ForegroundColor Cyan

# Check backend
$backendUrl = "http://localhost:8000/health"
try {
    $response = Invoke-RestMethod -Uri $backendUrl -TimeoutSec 5
    Write-Host "âœ“ Backend: HEALTHY" -ForegroundColor Green
    Write-Host "  Database: $($response.database)"
    Write-Host "  Version: $($response.version)"
} catch {
    Write-Host "âœ— Backend: OFFLINE" -ForegroundColor Red
}

# Check database size
$dbPath = "currency_calculator.db"
if (Test-Path $dbPath) {
    $dbSize = (Get-Item $dbPath).Length / 1MB
    Write-Host "âœ“ Database: $($dbSize.ToString('F2')) MB" -ForegroundColor Green
    
    if ($dbSize > 50) {
        Write-Host "  WARNING: Database > 50MB (consider cleanup)" -ForegroundColor Yellow
    }
}

# Check Tesseract
try {
    $tesseractVersion = & tesseract --version 2>&1 | Select-Object -First 1
    Write-Host "âœ“ Tesseract: $tesseractVersion" -ForegroundColor Green
} catch {
    Write-Host "âœ— Tesseract: NOT FOUND" -ForegroundColor Red
}

# Check Poppler
try {
    $popplerVersion = & pdftoppm -v 2>&1 | Select-Object -First 1
    Write-Host "âœ“ Poppler: $popplerVersion" -ForegroundColor Green
} catch {
    Write-Host "âœ— Poppler: NOT FOUND" -ForegroundColor Red
}</code></pre>
                </section>

                <div class="alert alert-success">
                    <strong>âœ“ Section Complete</strong>
                    <p>This section documents comprehensive performance requirements: Core operations (&lt;1ms single calc, &lt;100ms for 100 calcs), File processing (&lt;3s OCR, &lt;500ms CSV), Database operations (&lt;100ms queries), UI responsiveness (&lt;2s page load), Resource limits (Backend: 100MB idle/500MB active, Frontend: 300MB, DB: 50MB for 10K records), Optimization strategies (indexing, Decimal precision, batching, React.memo), Scalability considerations, Performance monitoring scripts.</p>
                </div>
            
            </article>
        </div>
    </div>

    <script src="../js/responsive.js"></script>
    <script src="../js/navigation.js"></script>
    <script src="../js/page-navigation.js"></script>
    <script src="../js/auth-guard.js"></script>
    <script src="../js/auth-logout.js"></script>
</body>
</html>